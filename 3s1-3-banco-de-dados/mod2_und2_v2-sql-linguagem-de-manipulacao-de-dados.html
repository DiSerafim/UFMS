<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√≥dulo 2 ‚Äì Defini√ß√£o e manipula√ß√£o de dados relacionais.</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>M√≥dulo 2 ‚Äì Defini√ß√£o e manipula√ß√£o de dados relacionais.</h1>
        <h2>üí° Unidade 2 - SQL - Linguagem de manipula√ß√£o de dados.</h2>
        <p>Professor Especialista: Vanessa Borges.</p>
    </header>
    <main>
        <section id="disciplinas">
            <h2>Disciplinas</h2>
            <p></p>
            <ul>
                <li>
                    <p>BANCO DE DADOS-T01-2024-1
                        <span class="status concluida">Conclu√≠do</span>
                    </p>
                </li>
            </ul>
        </section>
        <section id="materiais">
            <h2>Materiais</h2>
            <a href="https://www.youtube.com/watch?v=oFti3s_Lc_o&list=PLxI8Can9yAHeHQr2McJ01e-ANyh3K0Lfq&index=16&ab_channel=UNIVESP" class="btn waves-effect waves-light" target="_blank" type="button" name="action">
                V√≠deo 2 - 
                Bancos de Dados - Aula 15 - Linguagem de consulta ‚Äì SQL Parte III. 
                <i class="material-icons right"> send</i>
            </a>
            <p>Professor ministrante: Sarajane Marques Peres.</p>
        </section>
        <section>
            <h2>Conte√∫do</h2>
            <h3>Linguagem de consulta ‚Äì SQL.</h3>
        </section>

        <section>
            <h2>SQL.</h2>
            <p>
                Esquema para o modelo Relacional do contexto did√°tico: EMPRESA.</p>
            <pre>
                FUNCIONARIO (<b>ident</b>, nome, sobrenome, endereco, dtnasc, salario, sexo, supident, dnumero)
                DEPENDENTE(<b>fident</b>, <b>nome</b>, dt_nasc, sexo, relacionamento)
                DEPARTAMENTO(<b>numero</b>, nome, gident, dtinicio)
                LOCALIZACOES(<b>dnumero</b>, <b>localizacao</b>)
                PROJETO(<b>numero</b>, nome, localizacao, dnumero)
                TRABALHA_EM(<b>pnumero</b>, <b>fident</b>, horas)
            </pre>
            <p>Algumas simplifica√ß√µes nos nomes de vari√°veis foram realizadas para facilitar o uso delas nas consultas. A chave prim√°ria, em cada rela√ß√£o, est√° sublinhada.</p>

            <b>SQL-Structured Query Language:</b>
            <ul>
                <li>Linguagem de banco de dados com recursos para defini√ß√£o de dados, consulta aos dados e atualiza√ß√£o de dados.</li>
                <li>Permite especificar restri√ß√µes que devem ser impostas aos dados possibilitando a implementa√ß√£o da integridade e seguran√ßa da informa√ß√£o armazenada.</li>
            </ul>
            <p>SQL √© uma linguagem padr√£o para SGBDs comerciais. H√° um padr√£o, estabelecido pelo American National Standards Institute (ANSI) e pela International Standards Organization (ISO).</p>
            <ul>
                <li>Sugest√µes de consulta para implementa√ß√µes comerciais:</li>
                <ul>
                    <li>https://www.postgresql.org/docs/9.0/static/sql.html</li>
                    <li>https://www.postgresql.org/docs/9.0/static/bookindex.html</li>
                    <li>http://dev.mysql.com/doc/refman/5.7/en/sql-syntax.html</li>
                    <li>http://dev.mysql.com/doc/refman/5.7/en/literals.html</li>
                </ul>
            </ul>
        </section>

        <section>
            <h2>Consultas Aninhadas e Sub-consultas.</h2>
            <ul>
                <li>Existem consultas cuja implementa√ß√£o envolve o uso de informa√ß√µes retornadas por outras consultas.</li>
                <li>Em alguns casos, essa demanda por ser resolvida por <b>consultas aninhadas</b>, ou <b>Sub-consultas</b>.</li>
                <li><b>Sub-consultas</b> s√£o blocos <b>SELECT-FROM-WHERE</b> especificados dentro de uma cl√°usula WHERE, de forma adequada.</li>
            </ul>

            <p>Exemplos:</p>
            <pre>
            SELECT  ...
            FROM    ...
            WHERE   ... ... (SELECT
                         ü°π   FROM    ...
                         |   WHERE   ...);
                         |   
            Uma maneira de conectar as duas consultas
            </pre>

            <b>Consulta 31: Recupere os nomes de todos os funcion√°rios que possuem dois ou mais dependentes.</b>
            <pre>
                SELECT nome,
                FROM FUNCIONARIO
                WHERE (SELECT COUNT(*)
                       FROM DEPENDENTE
                       WHERE ident = fident) >= 2;
            </pre>
            <img src="img/tabela-sub-consulta.png" alt="tabela-sub-consulta.png">
            <p></p>

            <b>Consulta 32: Liste os nomes dos funcion√°rios que possuem sal√°rios maiores do que os sal√°rios de todos os funcion√°rios do departamento 5.</b>
            <pre>
                SELECT nome
                FROM FUNCIONARIO
                WHERE salario > ALL (SELECT salario
                                     FROM FUNCIONARIO
                                     WHERE dnumero = 5);
            </pre>

            <b>Consulta 33: Encontre os nomes de cada funcion√°rio que possui um dependente com o mesmo nome que ele e do mesmo sexo que o dele.</b>
            <pre>
                SELECT nome
                FROM FUNCIONARIO AS F
                WHERE F.ident IN (SELECT fident
                                  FROM DEPENDENTE AS D
                                  WHERE F.nome = D.nome
                                    AND F.sexo = D.sexo);
                ou

                SELECT nome
                FROM FUNCIONARIO AS F
                WHERE EXISTS (SELECT *
                                FROM DEPENDENTE AS D
                                WHERE F.ident = D.ident
                                AND F.nome = D.nome
                                AND F.sexo = D.sexo);
            </pre>
            <img src="img/tabela-com-um-dependente.png" alt="tabela-com-um-dependente.png">
            <p></p>

            <b>Consulta 34: Recupere os nomes dos empregados que n√£o possuem dependentes.</b>
            <pre>
                SELECT pnome
                FROM FUNCIONARIO
                WHERE NOT EXISTS (SELECT *
                                  FROM DEPENDENTE
                                  WHERE ident = fident);
            </pre>
            <img src="img/tabela-com-um-dependente1.png" alt="tabela-com-um-dependente1.png">
        </section>

        <section>
            <h2>Sub-consultas versus UPDATE.</h2>
            <pre>
                UPDATE FUNCIONARIO
                SET    salario = salario * 1,1
                WHERE  dnumero IN (SELECT numero
                                   FROM    DEPARTAMENTO
                                   WHERE   gident = '1163');
            </pre>
        </section>

        <section>
            <h2>Sub-consultas versus DELETE.</h2>
            <pre>
                DELETE FUNCIONARIO
                WHERE dnumero IN (SELECT numero
                                  FROM   DEPARTAMENTO
                                  WHERE  gident = '1163');
            </pre>
        </section>

        <section>
            <h2>Linguagem de consulta - SQL Parte III.</h2>
            <p>Estes slides est√£o baseados na bibliografia:</p>
            <li>Elmasri, Ramez; Navathe, Shamkant B. Sistemas de Banco de Dados. Pearson, 6a edi√ß√£o, 808—Ä., 2011.</li>
        </section>
    </main>
    <footer>
        <p>Diego Serafim de Sousa - 13 de maio de 2024</p>
    </footer>
</body>
</html>
