<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√≥dulo 3 ‚Äì SGBDs Relacionais.</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>M√≥dulo 3 ‚Äì SGBDs Relacionais.</h1>
        <h2>üí° Unidade 2 - Processamento de transa√ß√µes e controle de concorr√™ncia.</h2>
        <p>Professor Especialista: Vanessa Borges.</p>
    </header>
    <main>
        <section id="disciplinas">
            <h2>Disciplinas</h2>
            <p></p>
            <ul>
                <li>
                    <p>BANCO DE DADOS-T01-2024-1
                        <span class="status concluida">Conclu√≠do</span>
                    </p>
                </li>
            </ul>
        </section>
        <section id="materiais">
            <h2>Materiais</h2>
            <a href="https://www.youtube.com/watch?v=3FgsyHRG4SQ&ab_channel=UNIVESP" class="btn waves-effect waves-light" target="_blank" type="button" name="action">
                V√≠deo 1 - 
                Bancos de Dados - Aula 24 - Transa√ß√µes. 
                <i class="material-icons right"> send</i>
            </a>
            <p>Professor ministrante: Sarajane Marques Peres.</p>
        </section>
        <section>
            <h2>Conte√∫do</h2>
            <h3>Transa√ß√µes.</h3>
        </section>

        <section>
            <h2>Transa√ß√µes.</h2>
            <ul>
                <li>Um dos pap√©is de um SGBD √© <b>processar transa√ß√µes</b>: um conjunto de v√°rias opera√ß√µes que s√£o executadas sobre os dados do banco de dados, e que devem ser vistas pelo usu√°rio do sistema como uma √∫nica unidade de processamento.</li>
                <ul>
                    <li>A transfer√™ncia de valores entre contas correntes √© uma opera√ß√£o √∫nica do ponto de vista de um cliente de um sistema banc√°rio, por√©m, dentro do sistema de banco de dados, essa transfer√™ncia envolve v√°rias opera√ß√µes.</li>
                </ul>
                <li>Uma transa√ß√£o forma uma √∫nica unidade l√≥gica de trabalho.</li>
                <ul>
                    <li>√â <b>essencial que todo o conjunto de opera√ß√µes da transa√ß√£o seja conclu√≠do</b>, ou que, no caso de um problema (falha), nenhuma das opera√ß√µes do conjunto tenha efeito sobre os dados.</li>
                </ul>
                <li>O processamento das transa√ß√µes, realizado pelo SGBD deve garantir que:</li>
                <ul>
                    <li>a execu√ß√£o de uma transa√ß√£o seja completa,</li>
                    <li>seja poss√≠vel executar v√°rias transa√ß√µes de forma simult√¢nea, sem que inconsist√™ncias de dados sejam geradas.</li>
                </ul>
            </ul>
            <b>Arquitetura interna do SGDB:</b>
            <p></p>
            <img src="img/arquitetura-interna-sgdb.png" alt="arquitetura-interna-sgdb.png">
            <p></p>
            <b>Apresenta√ß√£o de uma Transa√ß√£o:</b>
            <pre>
            begin
                <b>start</b>;
                input (contaORIGEM, conta DESTINO, quantia);
                temp := <b>read</b> (Saldo [contaORIGEM]);
                if temp < quantia then
                    begin
                        output("Saldo insuficiente.");
                    end
                    else
                    begin
                        <b>write</b> (Saldo[contaORIGEM], temp - quantia);
                        temp = <b>read</b> (Saldo[contaDESTINO]);
                        <b>write</b> (Saldo[contaDESTINO), temp + quantia);
                        output ("Transfer√™ncia completa.");
                    end;
                <b>return</b>;
            end
            </pre>
            <p>Opera√ß√µes necess√°rias para suportar a implementa√ß√£o de mecanismos para processamento de transa√ß√µes:</p>
            <ul>
                <li><b>Begin-transaction</b>: marca o in√≠cio de uma transa√ß√£o.</li>
                <li><b>End-transaction</b>: marca o fim de uma transa√ß√£o.</li>
                <li><b>Commit-transaction</b>: sinal de t√©rmino com sucesso - as altera√ß√µes realizadas pela transa√ß√£o podem ser "permanentemente" gravadas no banco de dados.</li>
                <li><b>Abort-transaction (rollback, l.e. revers√£o)</b>: sinal que a transa√ß√£o n√£o terminou com sucesso - as altera√ß√µes j√° realizadas pela transa√ß√£o n√£o devem ter efeito sobre os dados do banco de dados, i.e, devem ser desfeitas.</li>
                <li><b>Undo</b>: desfaz uma opera√ß√£o.</li>
                <li><b>Redo</b>: refaz uma opera√ß√£o.</li>
            </ul>
            <b>Estados de uma Transa√ß√£o.</b>
            <p>Diagrama de transi√ß√£o de estados para a execu√ß√£o da transa√ß√£o.</p>
            <img src="img/transacao.png" alt="transacao.png">
            <ul>
                <li>O sistema de recupera√ß√£o de falhas precisa tomar algumas provid√™ncias.</li>
                <li>Transa√ß√£o deixa o sistema, com sucesso ou com falha. Os espa√ßos e controles criados para ela s√£o descartados no sistema.</li>
            </ul>
            <p>Opera√ß√µes da l√≥gica de implementa√ß√£o da transa√ß√£o que acessam os dados no banco de dados:</p>
            <ul>
                <li><b>read(x)</b>: transfere o item de dados x do BD para um buffer local alocado √† transa√ß√£o que executou a opera√ß√£o de read. O valor de x √© colocado dentro de uma vari√°vel de programa.</li>
            </ul>
            <p>Opera√ß√µes da l√≥gica de implementa√ß√£o da transa√ß√£o que acessam os dados no banco de dados:</p>
            <ul>
                <li><b>write(x)</b>: transfere o item de dados x do buffer local da transa√ß√£o que executou o write de volta para o BD. O valor da vari√°vel de programa √© passado para o item de dado no BD (ainda no buffer - a grava√ß√£o efetiva pode n√£o ser imediata).</li>
            </ul>
            <pre>
            begin                                                         
                <b>start</b>;                                             
                input (contaORIGEM, conta DESTINO, quantia);              
                temp := <b>read</b> (Saldo [contaORIGEM]);                
                if temp < quantia then                                    
                    begin                                                 
                        output("Saldo insuficiente.");                    
                    end                                                   
                    else                                                  
                    begin                                                 
                        <b>write</b> (Saldo[contaORIGEM], temp - quantia);
                        temp = <b>read</b> (Saldo[contaDESTINO]);         
                        <b>write</b> (Saldo[contaDESTINO], temp + quantia);
                        output ("Transfer√™ncia completa.");                
                    end;                                                   
                <b>return</b>;                                             
            end                   
            -----------------------------------------
            read(A);
            A := A - 50;
            write(A);
            read(B);
            B := B + 50;
            write(B);                                         
            </pre>
        </section>

        <section>
            <h2>Propriedades da Transa√ß√£o (ACID).</h2>
            <b>A-ATOMICIDADE:</b>
            <p>Ou todas as opera√ß√µes da transa√ß√£o s√£o refletidas corretamente no banco de dados, ou nenhuma delas o ser√°.</p>
            <img src="img/transacao1.png" alt="transacao1.png">
            <ul>
                <li>Assegurar a <b>ATOMICIDADE</b> de uma transa√ß√£o √© responsabilidade do SGBD, mais especificamente dos Componentes de Gerenciamento de Transa√ß√µes e de <b>Recupera√ß√£o de Falhas</b>.</li>
            </ul>

            <b>C-CONSIST√äNCIA:</b>
            <p>A execu√ß√£o de uma transa√ß√£o preserva a consist√™ncia do banco de dados. Ela inicia a partir de um estado consistente do banco e dados e finaliza deixando o banco de dados novamente em um estado consistente.</p>
            <p>O resultado deve tamb√©m atender as expectativas do processo real sob implementa√ß√£o.</p>
            <ul><li>Assegurar a <b>CONSIST√äNCIA</b> de uma transa√ß√£o √© responsabilidade do <b>programador</b>.s</li></ul>

            <b>I-ISOLAMENTO:</b>
            <p>Embora diversas transa√ß√µes possam ser executadas de maneira concorrente, o isolamento garante que cada transa√ß√£o siga seu curso sem considerar a√ß√µes/opera√ß√µes executadas por outras transa√ß√µes concorrentes.</p>
            <ul><li>Assegurar o isolamento √© responsabilidade do <b>Controle de Concorr√™ncia</b>.</li></ul>
            <img src="img/transacao2.png" alt="transacao2.png">

            <p></p>
            <b>D - DURABILIDADE:</b>
            <p>Depois que a transa√ß√£o finaliza com sucesso, as mudan√ßas que ela faz no banco de dados devem persistir, mesmo se houver falhas no sistema.</p>
            <ul><li>Assegurar a durabilidade √© responsabilidade do componente do SGBD chamado de <b>Recuperador de Falhas</b>.</li></ul>
        </section>

        <section>
            <h2>Execu√ß√£o concorrente.</h2>
            <b>Transa√ß√£o 1 e 2:</b>
            <p></p>
            <img src="img/transacao3.png" alt="transacao3.png">
            <p></p>
            <b>Representa√ß√£o da Concorr√™ncia (iniciando com T1): ‚úÖ</b>
            <p></p>
            <img src="img/transacao4.png" alt="transacao4.png">
            <p></p>
            <b>Representa√ß√£o da Concorr√™ncia (iniciando com T2): ‚úÖ</b>
            <p></p>
            <img src="img/transacao5.png" alt="transacao5.png">
            <p></p>
            <b>Representa√ß√£o da Concorr√™ncia (iniciando T1 e T2 ao mesmo tempo): ‚ùå</b>
            <p></p>
            <img src="img/transacao6.png" alt="transacao6.png">
            <p></p>
            <p>Problemas em execu√ß√µes concorrentes inadequadas ou decorrente de falhas:</p>
            <ul>
                <li>Problema de <b>altera√ß√µes tempor√°rias</b>.</li>
                <li>Problema de <b>altera√ß√µes perdidas</b>.</li>
                <li>Problema do <b>resumo incorreto</b>.</li>
            </ul>
        </section>

        <section>
            <h2>Teoria da serializa√ß√£o.</h2>
            <p>O sistema de banco de dados deve controlar a execu√ß√£o concorrente de transa√ß√µes de forma a assegurar que:</p>
            <ul>
                <li>O resultado obtido ap√≥s a execu√ß√£o concorrente de duas ou mais transa√ß√µes seja equivalente ao resultado obtido em alguma execu√ß√£o serial destas transa√ß√µes.</li>
            </ul>
            <p>Uma execu√ß√£o concorrente deve ser serializ√°vel. Ou seja, considerando o mesmo conjunto de transa√ß√µes, uma execu√ß√£o concorrente deve ser equivalente a uma execu√ß√£o serial.</p>
        </section>

        <section>
            <h2>Transa√ß√µes:</h2>
            <p>Estes slides est√£o baseados na bibliografia:</p>
            <ul><li>Elmasri, Ramez; Navathe, Shamkant B. Sistemas de Banco de Dados. Pearson, 6a edi√ß√£o, 808p., 2011.</li></ul>
        </section>
    </main>
    <footer>
        <p>Diego Serafim de Sousa - 18 de maio de 2024</p>
    </footer>
</body>
</html>
