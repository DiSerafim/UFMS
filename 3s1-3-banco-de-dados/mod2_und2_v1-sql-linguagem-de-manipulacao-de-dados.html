<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√≥dulo 2 ‚Äì Defini√ß√£o e manipula√ß√£o de dados relacionais.</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>M√≥dulo 2 ‚Äì Defini√ß√£o e manipula√ß√£o de dados relacionais.</h1>
        <h2>üí° Unidade 2 - SQL - Linguagem de manipula√ß√£o de dados.</h2>
        <p>Professor Especialista: Vanessa Borges.</p>
    </header>
    <main>
        <section id="disciplinas">
            <h2>Disciplinas</h2>
            <p></p>
            <ul>
                <li>
                    <p>BANCO DE DADOS-T01-2024-1
                        <span class="status concluida">Conclu√≠do</span>
                    </p>
                </li>
            </ul>
        </section>
        <section id="materiais">
            <h2>Materiais</h2>
            <a href="https://www.youtube.com/watch?v=XnS8XCXPkuk&list=PLxI8Can9yAHeHQr2McJ01e-ANyh3K0Lfq&index=15&ab_channel=UNIVESP" class="btn waves-effect waves-light" target="_blank" type="button" name="action">
                V√≠deo 1 - 
                Bancos de Dados - Aula 14 - Linguagem de consulta ‚Äì SQL Parte II. 
                <i class="material-icons right"> send</i>
            </a>
            <p>Professor ministrante: Sarajane Marques Peres.</p>
        </section>
        <section>
            <h2>Conte√∫do</h2>
            <h3>Linguagem de consulta ‚Äì SQL.</h3>
        </section>

        <section>
            <h2>SQL.</h2>
            <p>
                Esquema para o modelo Relacional do contexto did√°tico: EMPRESA.</p>
            <pre>
                FUNCIONARIO (<b>ident</b>, nome, sobrenome, endereco, dtnasc, salario, sexo, supident, dnumero)
                DEPENDENTE(<b>fident</b>, <b>nome</b>, dt_nasc, sexo, relacionamento)
                DEPARTAMENTO(<b>numero</b>, nome, gident, dtinicio)
                LOCALIZACOES(<b>dnumero</b>, <b>localizacao</b>)
                PROJETO(<b>numero</b>, nome, localizacao, dnumero)
                TRABALHA_EM(<b>pnumero</b>, <b>fident</b>, horas)
            </pre>
            <p>Algumas simplifica√ß√µes nos nomes de vari√°veis foram realizadas para facilitar o uso delas nas consultas. A chave prim√°ria, em cada rela√ß√£o, est√° sublinhada.</p>

            <b>SQL-Structured Query Language:</b>
            <ul>
                <li>Linguagem de banco de dados com recursos para defini√ß√£o de dados, consulta aos dados e atualiza√ß√£o de dados.</li>
                <li>Permite especificar restri√ß√µes que devem ser impostas aos dados possibilitando a implementa√ß√£o da integridade e seguran√ßa da informa√ß√£o armazenada.</li>
            </ul>
            <p>SQL √© uma linguagem padr√£o para SGBDs comerciais. H√° um padr√£o, estabelecido pelo American National Standards Institute (ANSI) e pela International Standards Organization (ISO).</p>
            <ul>
                <li>Sugest√µes de consulta para implementa√ß√µes comerciais:</li>
                <ul>
                    <li>https://www.postgresql.org/docs/9.0/static/sql.html</li>
                    <li>https://www.postgresql.org/docs/9.0/static/bookindex.html</li>
                    <li>http://dev.mysql.com/doc/refman/5.7/en/sql-syntax.html</li>
                    <li>http://dev.mysql.com/doc/refman/5.7/en/literals.html</li>
                </ul>
            </ul>
        </section>

        <section>
            <h2>Estrutura b√°sica de um consulta para extra√ß√£o de informa√ß√£o em SQL.</h2>
            <ul>
                <li><b>SELECT</b> (lista de atributos ></li>
                <li><b>FROM</b> (lista de rela√ß√µes/tabelas ></li>
                <li><b>WHERE</b> (condi√ß√£o></li>
                <li>em que:</li>
                <ul>
                    <li>(lista de atributos >: √© uma lista de nomes de atributos cujos valores ser√£o recuperados pela consulta.</li>
                    <li>(lista de rela√ß√µes/tabelas >: √© uma lista de nomes de rela√ß√µes necess√°rias para encontrar a informa√ß√£o desejada na consulta.</li>
                    <li>( condi√ß√£o >: √© uma express√£o condicional (booleana) que identifica quais tuplas das rela√ß√µes mencionadas devem ser consideradas na consulta.</li>
                </ul>
            </ul>

            <p>Exemplos:</p>
            <b>Consulta 18: Recupere as datas de nascimento e os endere√ßos dos funcion√°rios que possuem o sobrenome 'Brotas'.</b>
            <pre>
                SELECT dtnasc, endereco FROM FUNCIONARIO WHERE sobrenome = 'Brotas';
            </pre>

            <b>Consulta 19: Selecione os identificadores de todos os funcion√°rios.</b>
            <pre>
                SELECT ident FROM FUNCIONARIO;
            </pre>

            <b>Consulta 20: Recupere os nomes e os endere√ßos de todos os funcion√°rios que trabalham para o departamento de engenharia.</b>
            <pre>
                SELECT FUNCIONARIO.nome, endereco
                FROM FUNCIONARIO, DEPARTAMENTO
                WHERE DEPARTAMENTO.nome = 'Engenharia' AND numero = dnumero;
            </pre>

            <img src="img/tabela-funcionario-departamento.png" alt="tabela-funcionario-departamento.png">
            <p></p>

            <b>Consulta 21: Recupere todos os atributos de FUNCIONARIO e de DEPARTAMENTO, considerando que o funcion√°rio trabalha para o departamento 'Engenharia'.</b>
            <pre>
                SELECT *
                FROM FUNCIONARIO, DEPARTAMENTO
                WHERE DEPARTAMENTO.nome = 'Engenharia' AND numero= dnumero;
            </pre>

            <b>Consulta 22: Para cada projeto localizado em 'S√£o Paulo', liste o n√∫mero do projeto, o n√∫mero do departamento que controla o projeto, eo nome, endere√ßo e data de nascimento do gerente deste departamento.</b>
            <pre>
                SELECT PROJETO.numero, PROJETO.dnumero,
                    FUNCIONARIO.nome, endereco, dtnasc
                FROM PROJETO, DEPARTAMENTO, FUNCIONARIO
                WHERE PROJETO.dnumero = DEPARTAMENTO.numero AND
                    gident = ident AND PROJETO.localizacao = 'S√£o Paulo';
            </pre>

            <b>Consulta 23: Para cada funcion√°rio, recupere seu nome e o nome do seu supervisor imediato.</b>
            <pre>
                SELECT F.nome, S.nome
                FROM FUNCIONARIO AS F, FUNCIONARIO AS S
                WHERE F.supident = S.ident;
            </pre>
            <img src="img/tabela-funcionario-as.png" alt="tabela-funcionario-as.png">
            <p></p>

            <b>Consulta 24: Recupere os sal√°rios de todos os funcion√°rios.</b>
            <pre>
                SELECT ALL salario FROM FUNCIONARIO;
            </pre>

            <b>Consulta 25: Recupere os valores distintos de sal√°rios praticados na empresa.</b>
            <pre>
                SELECT DISTINCT salario FROM FUNCIONARIO;
            </pre>

            <b>Consulta 26: Fa√ßa uma lista de n√∫meros de projetos que envolvem um funcion√°rio cujo sobrenome √© 'Silva'. O envolvimento do funcion√°rio pode ser como trabalhador ou como gerente do departamento que controla o projeto.</b>
            <pre>
                (SELECT DISTINCT PROJETO.numero
                FROM PROJETO, DEPARTAMENTO, FUNCIONARIO WHERE PROJETO.dnumero= DEPARTAMENTO.numero AND
                    gident ident AND sobrenome = 'Silva')
                UNION
                (SELECT DISTINCT PROJETO.numero
                FROM PROJETO, TRABALHA_EM, FUNCIONARIO
                WHERE PROJETO.dnumero = TRABALHA_EM.pnumero AND
                    TRABALHA_EM.fident = ident AND sobrenome = 'Silva');
            </pre>
            <p>Tuplas em duplicidade ser√£o eliminadas do resultado.</p>
            <li>Use [UNION | EXCEPT | INTERSECT] ALL se for necess√°rio manter as duplicatas.</li>

            <p></p>
            <b>Consulta 27: Recupere todos os funcion√°rios cujos endere√ßos s√£o em SP.</b>
            <pre>
                SELECT nome, sobrenome
                FROM FUNCIONARIO
                WHERE endereco LIKE '%SP%';
            </pre>

            <b>Consulta 28: Recupere todos os funcion√°rios que nasceram nos anos de 1950.</b>
            <pre>
                SELECT nome, sobrenome
                FROM FUNCIONARIO
                WHERE dtnasc LIKE '__/__/195_';
            </pre>

            <b>Consulta 29: Recupere a lista de funcion√°rios e de projetos nos quais eles trabalham, ordenada por departamento. Dentro de departamento, ordene por nome do funcion√°rio.</b>
            <pre>
                SELECT D.nome, F.nome, P.numero
                FROM DEPARTAMENTO AS D, FUNCIONARIO AS F,
                    TRABALHA_EM AS T, PROJETO AS P
                WHERE D.numero = F.dnumero AND F.ident = T.fident
                    AND T.pnumero = P.numero
                ORDER BY D.nome ASC, F.nome ASC;
            </pre>

            <b>Consulta 30: Recupere os nomes de todos os funcionarios que n√£o possuem supervisores.</b>
            <pre>
                SELECT nome
                FROM FUNCIONARIO
                WHERE supident IS NULL;
            </pre>
        </section>

        <section>
            <h2>Exemplos de uso de JOIN.</h2>
            <pre>
                SELECT F.nome, endereco
                FROM (FUNCIONARIO JOIN DEPARTAMENTO ON dnumero = numero)
                WHERE DEPARTAMENTO.nome = 'Engenharia';

                SELECT F.nome, S.nome
                FROM (FUNCIONARIO AS F JOIN FUNCIONARIO AS S ON F.ident = S.supident);
            </pre>
        </section>

        <section>
            <h2>Exemplos de fun√ß√µes agregadas.</h2>
            <pre>
            SELECT SUM(salario), MAX(salario), MIN(salario), AVG(salario)
            FROM FUNCIONARIO;
            
            SELECT nome,
            FROM FUNCIONARIO
            WHERE (SELECT COUNT(*)
            FROM DEPENDENTE
            WHERE ident = fident) >= 2;
            </pre>
        </section>

        <section>
            <h2>Exemplo: GROUP BY e HAVING.</h2>
            <pre>
                SELECT Dnome, COUNT(*)
                FROM DEPARTAMENTO AS D, FUNCIONARIO AS F
                WHERE D.numero = F.dnumero AND salario > 40.000
                GROUP BY Dnome
                HAVING COUNT(*) > 5;
            </pre>
        </section>

        <section>
            <h2>Linguagem de consulta - SQL Parte II.</h2>
            <p>Estes slides est√£o baseados na bibliografia:</p>
            <li>Elmasri, Ramez; Navathe, Shamkant B. Sistemas de Banco de Dados. Pearson, 6a edi√ß√£o, 808—Ä., 2011.</li>
        </section>
    </main>
    <footer>
        <p>Diego Serafim de Sousa - 13 de maio de 2024</p>
    </footer>
</body>
</html>
